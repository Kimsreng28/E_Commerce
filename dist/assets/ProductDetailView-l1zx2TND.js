import{B as _t}from"./Breadcrumb_Component-hauAcdFA.js";import{F as ft}from"./Footer_Component-Dtm_2BHz.js";import{u as pt,a as Pt,N as ht}from"./Navbar_Component-ZR1cQJ3T.js";import{_ as U,a as l,c as y,f as d,g as s,s as e,F as k,m as R,x as T,t as u,u as G,B as I,j as b,z as Ct,y as K,l as C,o as Y,w as wt,C as L,I as H,q as X,J as bt,D as J,K as yt}from"./index-CtQclHPH.js";import{B as kt}from"./Button_Component-Bseh6dy0.js";import{P as Rt,u as Z}from"./ProductCard_Component-BMGJ1KFy.js";import{u as St}from"./useReviewStore-DyeQfOfK.js";import{u as Dt}from"./useUserSignupStore-Kl5PjanY.js";import{L as $}from"./LoadingView-CAG0qKEz.js";const It="/assets/free-shipping-DtsGGNQv.png",Nt="/assets/product-return-CuaWQWPR.png",Tt={name:"DetailProduct_Component",components:{Button_Component:kt},props:{id:Number,imageDetails:Array,imageProduct:String,nameProduct:String,priceProduct:String,ratingProduct:String,descriptionProduct:String,colorProduct:Array,sizeProduct:Array,discountProduct:String,oldPrice:Number,stock:String,quantity:{type:Number,default:1}},setup(n){const i=pt(),r=Pt(),t=K(),_=l(n.quantity);console.log("Received discountProduct:",n.discountProduct),console.log("Received descriptionProduct:",n.descriptionProduct),console.log("Props received in DetailProduct_Component:",n);const p=l(n.colorProduct[0]||"#A0BCE0"),v=l(n.sizeProduct[0]||"S"),a=l(n.imageProduct),m=h=>{a.value=h},o=y(()=>n.discountProduct?`${n.discountProduct}`:"0%");console.log("Sending discountPrice to PriceSummary:",o.value);const f=Number(n.stock),P=l(f>0?"In Stock":"Out of Stock");return{handleAddToWishlist:()=>{const h={id:n.id,title:n.nameProduct,images:n.imageProduct,price:parseFloat(n.priceProduct),productDiscount:o.value,oldPrice:n.oldPrice,quantity:_.value,color:p.value,size:v.value};r.addToWishlist(h),alert("Product added to wishlist!")},handleAddToCart:()=>{const h={id:n.id,name:n.nameProduct,price:parseFloat(n.priceProduct),image:a.value,quantity:_.value,color:p.value,size:v.value,discount:o.value};i.addToCart(h),alert("Product added to cart!"),t.push("/cart")},incrementQuantity:()=>{_.value+=1},decrementQuantity:()=>{_.value>1&&(_.value-=1)},quantity:_,selectedColor:p,selectedSize:v,selectImage:m,stock:P,imageProduct:a,discountPrice:o,stockQuantity:f}}},Vt={class:"productDetailComponent"},xt={class:"productDetail"},zt={class:"imagesOfProducts"},Ft={class:"fourImages"},At=["src","onClick"],Bt={class:"mainImage"},Lt=["src"],Ut={class:"detailOfProduct"},qt={class:"name"},Et={class:"discount"},Qt={class:"rating"},Wt={class:"price"},Ot={class:"oldPrice"},Mt={class:"description"},jt={key:0,class:"colorSelection"},Gt={class:"colorOptions"},Ht=["onClick"],Jt={class:"sizeSelection"},Kt={class:"sizeOptions"},Yt=["onClick"],Xt={class:"detailMethod"},Zt={class:"wishlist"},$t={class:"buttonIncrementAndDecrement"},te={class:"number"},ee={class:"addToCart"};function oe(n,i,r,t,_,p){const v=C("Button_Component");return d(),s("div",Vt,[e("div",xt,[e("div",zt,[e("div",Ft,[(d(!0),s(k,null,R(r.imageDetails,a=>(d(),s("img",{key:a,src:"http://localhost:5173/"+a,alt:"",onClick:m=>t.selectImage(a),class:T({selected:a===t.imageProduct})},null,10,At))),128))]),e("div",Bt,[e("img",{src:"http://localhost:5173/"+t.imageProduct,alt:""},null,8,Lt)])]),e("div",Ut,[e("div",qt,[e("p",null,u(r.nameProduct),1)]),e("div",Et,[e("p",null,u(r.discountProduct),1)]),e("div",Qt,[(d(),s(k,null,R(5,a=>e("span",{key:a,class:T(["star",{filled:a<=Math.floor(r.ratingProduct),half:a===Math.ceil(r.ratingProduct)&&!Number.isInteger(r.ratingProduct)}])}," ★ ",2)),64)),e("p",null,"("+u(r.ratingProduct)+")",1),i[3]||(i[3]=e("p",null,"|",-1)),e("p",{style:G({color:t.stock==="In Stock"?"#0fb763":"#ff3d3d"})},u(t.stock),5)]),e("div",Wt,[e("p",null,"$ "+u(r.priceProduct),1),e("p",Ot,"$ "+u(r.oldPrice),1)]),e("div",Mt,[e("p",null,u(r.descriptionProduct),1)]),i[9]||(i[9]=e("hr",null,null,-1)),r.colorProduct.length>0?(d(),s("div",jt,[i[4]||(i[4]=e("p",null,"Colors:",-1)),e("div",Gt,[(d(!0),s(k,null,R(r.colorProduct,(a,m)=>(d(),s("span",{key:m,class:T(["colorOption",{selected:t.selectedColor===a}]),style:G({backgroundColor:a}),onClick:o=>t.selectedColor=a},null,14,Ht))),128))])])):I("",!0),e("div",Jt,[i[5]||(i[5]=e("p",null,"Size:",-1)),e("div",Kt,[(d(!0),s(k,null,R(r.sizeProduct,(a,m)=>(d(),s("span",{key:m,class:T(["sizeOption",{selected:t.selectedSize===a}]),onClick:o=>t.selectedSize=a},u(a),11,Yt))),128))])]),e("div",Xt,[e("div",Zt,[e("button",{onClick:i[0]||(i[0]=(...a)=>t.handleAddToWishlist&&t.handleAddToWishlist(...a))},i[6]||(i[6]=[e("span",{class:"material-icons"},"favorite",-1)]))]),e("div",$t,[e("button",{id:"add",onClick:i[1]||(i[1]=(...a)=>t.incrementQuantity&&t.incrementQuantity(...a))},i[7]||(i[7]=[e("span",{id:"plus",class:"material-icons"},"add",-1)])),e("div",te,[e("p",null,u(t.quantity),1)]),e("button",{id:"subtract",onClick:i[2]||(i[2]=(...a)=>t.decrementQuantity&&t.decrementQuantity(...a))},i[8]||(i[8]=[e("span",{id:"minus",class:"material-icons"},"remove",-1)]))]),e("div",ee,[b(v,{"name-button":"Add To Cart","color-button":"#FFFFFF","background-color-button":"#958383","height-button":"45px","width-button":"140px",icon:"shopping_cart",onClick:t.handleAddToCart},null,8,["onClick"])])]),i[10]||(i[10]=Ct('<div class="tellAbout" data-v-fb00ff37><div class="freeDelivery" data-v-fb00ff37><div class="img" data-v-fb00ff37><img src="'+It+'" alt="" data-v-fb00ff37></div><div class="text" data-v-fb00ff37><p data-v-fb00ff37>Free Delivery</p><a data-v-fb00ff37>Click your line go to detail. </a></div></div><div class="returnDelivery" data-v-fb00ff37><div class="img" data-v-fb00ff37><img src="'+Nt+'" alt="" data-v-fb00ff37></div><div class="text" data-v-fb00ff37><p data-v-fb00ff37>Return Delivery</p><p data-v-fb00ff37>Free 30 Days Delivery Return.<a data-v-fb00ff37> Detail</a></p></div></div></div>',1))])])])}const ie=U(Tt,[["render",oe],["__scopeId","data-v-fb00ff37"]]),ne={name:"StarRating",props:{modelValue:{type:Number,default:0},maxStars:{type:Number,default:5}},emits:["update:modelValue"],computed:{currentRating(){return this.modelValue}},methods:{setRating(n){this.$emit("update:modelValue",n)}}},ae={class:"star-rating"},de=["onClick"];function se(n,i,r,t,_,p){return d(),s("div",ae,[(d(!0),s(k,null,R(r.maxStars,v=>(d(),s("span",{key:v,class:T(["star",{active:v<=p.currentRating}]),onClick:a=>p.setRating(v)}," ★ ",10,de))),128))])}const re=U(ne,[["render",se]]),ce={name:"ReviewProduct_Component",components:{ProductCard_Component:Rt,LoadingView:$,StarRating:re},props:{productId:{type:[String,Number],required:!0},productTitle:{type:String,required:!0},description:{type:String,required:!0}},setup(n){const i=K(),r=Z(),t=St(),_=Dt(),p=["Details","RelateItems","Reviews"],v=l("Details"),a=l(!1),m=l(null),o=l(""),f=l(0),P=l(""),N=l(0),q=l([]),O=l(!1),E=l(!0),h=l(""),V=l(0),w=l(null),tt=y(()=>_.profileImage),et=y(()=>_.firstName),ot=y(()=>_.lastName),M=y(()=>r.products.find(g=>g.id==n.productId)),it=y(()=>{const c=r.products.filter(g=>g.category==M.value.category);return c.length>0?[...c]:[]}),nt=c=>{i.push({name:"productDetail",params:{id:c}})},x=()=>{const c=t.reviews.filter(g=>g.productId===n.productId);q.value=c};Y(()=>{t.loadReviews(),x(),setTimeout(()=>{E.value=!1},1e3)}),wt(()=>n.productId,()=>n.category,()=>x());const at=()=>{try{if(!h.value||V.value<1||V.value>5){alert("Please provide a valid comment and rating.");return}t.addReview(n.productId,h.value,V.value,w.value||null),h.value="",V.value=0,w.value=[],alert("Review posted successfully!"),x()}catch(c){alert(c.message)}},dt=()=>{if(!P.value||N.value<=0||N.value>5){console.error("Invalid review data.");return}t.addReview({productId:n.productId,comment:P.value,rating:N.value,image:w.value||null,date:new Date().toISOString()}),P.value="",N.value=0,w.value=null,x()},st=c=>{const g=z.value[c];a.value=!0,m.value=c,o.value=g.comment,f.value=g.rating,w.value=g.image},rt=()=>{if(m.value===null)return;const c={...z.value[m.value],comment:o.value,rating:f.value,image:w.value||z.value[m.value].image,date:new Date().toISOString()};t.updateReview(c.id,c),x(),j()},j=()=>{a.value=!1,m.value=null,o.value="",f.value=0,w.value=null},ct=c=>{const g=z.value[c].id;t.deleteReview(g)},z=y(()=>t.reviews.filter(c=>c.productId===n.productId)),lt=c=>{v.value=c};function ut(c,g){const A=new FileReader;A.readAsDataURL(c),A.onload=mt=>{const F=new Image;F.src=mt.target.result,F.onload=()=>{const B=document.createElement("canvas"),vt=B.getContext("2d"),Q=800,W=800;let S=F.width,D=F.height;S>D?S>Q&&(D*=Q/S,S=Q):D>W&&(S*=W/D,D=W),B.width=S,B.height=D,vt.drawImage(F,0,0,S,D);const gt=B.toDataURL("image/jpeg",.7);g(gt)}}}return{tabs:p,selectedTab:v,relatedProducts:it,reviews:q,profileImage:tt,firstName:et,lastName:ot,newComment:P,newRating:N,addReview:dt,isEditing:a,editingComment:o,editingRating:f,editReview:st,saveReview:rt,cancelEdit:j,deleteReview:ct,changeTab:lt,productDetails:M,goToDetail:nt,isSearching:O,isLoading:E,comment:h,rating:V,image:w,postReview:at,onImageUpload:c=>{const g=c.target.files[0];g&&ut(g,A=>{w.value=A})},filteredReviews:z}}},le={class:"reviewProduct"},ue={class:"tabs"},me={class:"tabBtn"},ve=["onClick"],ge={class:"tabContent"},_e={class:"detail"},fe={class:"contain"},pe={key:0},Pe={key:0,class:"loadSearch"},he={key:1,class:"productContain"},Ce={key:0,class:"reviews"},we={class:"review-actions"},be={key:0},ye={key:0,class:"edit-form"},ke={class:"edit-actions"},Re={class:"review-head"},Se=["src"],De={class:"review-header"},Ie={class:"review-name"},Ne={class:"review-info"},Te={class:"review-content"},Ve={class:"review-product-title"},xe={class:"review-date"},ze={class:"review-content1"},Fe={class:"comment"},Ae=["src"],Be={class:"but-action"},Le=["onClick"],Ue=["onClick"];function qe(n,i,r,t,_,p){const v=C("LoadingView"),a=C("ProductCard_Component"),m=C("StarRating");return d(),s("div",le,[e("div",ue,[e("div",me,[(d(!0),s(k,null,R(t.tabs,o=>(d(),s("button",{key:o,class:T({active:t.selectedTab===o}),onClick:f=>t.changeTab(o)},u(o),11,ve))),128))])]),e("div",ge,[L(e("div",_e,[e("p",null,u(r.description||"No details available for this product."),1)],512),[[H,t.selectedTab==="Details"]]),L(e("div",fe,[t.relatedProducts&&t.relatedProducts.length>0?(d(),s("div",pe,[t.isSearching?(d(),s("div",Pe,[b(v)])):(d(),s("div",he,[(d(!0),s(k,null,R(t.relatedProducts,o=>(d(),X(a,{key:o.id,product:o,id:o.id,"name-product":o.title,"image-product":o.image,"rating-product":o.rating,"price-product":o.price,"size-product":o.size,"color-product":o.color,"stock-product":o.stock,"description-product":o.description,"discount-product":o.discount,"image-details":o.imageDetails,"old-price":o.oldPrice,class:"productCard",onClick:f=>t.goToDetail(o.id)},null,8,["product","id","name-product","image-product","rating-product","price-product","size-product","color-product","stock-product","description-product","discount-product","image-details","old-price","onClick"]))),128))]))])):I("",!0)],512),[[H,t.selectedTab==="RelateItems"]]),t.selectedTab==="Reviews"?(d(),s("div",Ce,[e("form",{onSubmit:i[4]||(i[4]=bt((...o)=>t.addReview&&t.addReview(...o),["prevent"])),class:"review-form"},[e("div",we,[e("div",null,[L(e("input",{"onUpdate:modelValue":i[0]||(i[0]=o=>t.comment=o),type:"text",placeholder:"Write your review..."},null,512),[[J,t.comment]]),i[9]||(i[9]=e("label",{class:"rating-label"},"Rating:",-1)),b(m,{modelValue:t.rating,"onUpdate:modelValue":i[1]||(i[1]=o=>t.rating=o),maxStars:5},null,8,["modelValue"]),e("p",null,"Your rating: "+u(t.rating),1)]),e("input",{type:"file",onChange:i[2]||(i[2]=(...o)=>t.onImageUpload&&t.onImageUpload(...o))},null,32),t.image?I("",!0):(d(),s("p",be)),e("button",{onClick:i[3]||(i[3]=(...o)=>t.postReview&&t.postReview(...o))},"Post")])],32),t.isEditing?(d(),s("div",ye,[i[10]||(i[10]=e("h3",null,"Edit Review",-1)),L(e("textarea",{"onUpdate:modelValue":i[5]||(i[5]=o=>t.editingComment=o),placeholder:"Edit your comment",class:"edit-input"},null,512),[[J,t.editingComment]]),b(m,{modelValue:t.editingRating,"onUpdate:modelValue":i[6]||(i[6]=o=>t.editingRating=o),maxStars:5},null,8,["modelValue"]),e("div",ke,[e("button",{onClick:i[7]||(i[7]=(...o)=>t.saveReview&&t.saveReview(...o)),class:"save-btn"},"Save"),e("button",{onClick:i[8]||(i[8]=(...o)=>t.cancelEdit&&t.cancelEdit(...o)),class:"cancel-btn"},"Cancel")])])):I("",!0),i[11]||(i[11]=e("p",null,"Comments",-1)),(d(!0),s(k,null,R(t.filteredReviews,(o,f)=>(d(),s("div",{class:"showReview",key:o.id},[e("div",null,[e("div",Re,[e("img",{src:t.profileImage,alt:"",class:"profile-pic"},null,8,Se),e("div",De,[e("p",Ie,u(t.firstName)+" "+u(t.lastName),1),e("p",null,"⭐"+u(o.rating),1)])]),e("div",Ne,[e("div",Te,[e("p",Ve,u(r.productTitle),1),e("p",xe,u(new Date(o.date).toLocaleDateString()),1)]),e("div",ze,[e("p",Fe,u(o.comment),1),o.image?(d(),s("img",{key:0,src:o.image,alt:"Review Image",style:{"max-width":"200px"}},null,8,Ae)):I("",!0)])])]),e("div",Be,[e("button",{onClick:P=>t.editReview(f)},"Edit",8,Le),e("button",{onClick:P=>t.deleteReview(f)},"Delete",8,Ue)])]))),128))])):I("",!0)])])}const Ee=U(ce,[["render",qe],["__scopeId","data-v-ae91724c"]]),Qe={name:"ProductDetailView",components:{Navbar_Component:ht,Footer_Component:ft,Breadcrumb_Component:_t,DetailProduct_Component:ie,LoadingView:$,ReviewProduct_Component:Ee},props:{id:{type:[String,Number],required:!0}},setup(){const n=l(!0);Y(()=>{setTimeout(()=>{n.value=!1},1e3)});const r=yt().params.id,t=Z();return{product:y(()=>t.products.find(p=>p.id===Number(r))),isLoading:n}}},We={class:"productDetailScreen"},Oe={key:0,class:"load"},Me={key:1};function je(n,i,r,t,_,p){const v=C("Navbar_Component"),a=C("LoadingView"),m=C("Breadcrumb_Component"),o=C("DetailProduct_Component"),f=C("ReviewProduct_Component"),P=C("Footer_Component");return d(),s("div",We,[b(v),t.isLoading?(d(),s("div",Oe,[b(a)])):(d(),s("div",Me,[b(m),t.product?(d(),X(o,{class:"pdDt",key:t.product.id,id:t.product.id,imageProduct:t.product.image,nameProduct:t.product.title,ratingProduct:t.product.rating,priceProduct:t.product.price,descriptionProduct:t.product.description,colorProduct:t.product.color,sizeProduct:t.product.size,discountProduct:t.product.discount,oldPrice:t.product.oldPrice,imageDetails:t.product.imageDetails,stock:t.product.stock},null,8,["id","imageProduct","nameProduct","ratingProduct","priceProduct","descriptionProduct","colorProduct","sizeProduct","discountProduct","oldPrice","imageDetails","stock"])):I("",!0),b(f,{productId:n.$route.params.id,description:t.product.description,"product-title":t.product.title},null,8,["productId","description","product-title"]),b(P,{class:"footer"})]))])}const oo=U(Qe,[["render",je],["__scopeId","data-v-626a9758"]]);export{oo as default};
