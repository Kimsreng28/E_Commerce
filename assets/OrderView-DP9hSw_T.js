import{B as x}from"./Breadcrumb_Component-DKdRsi0y.js";import{B as O}from"./Button_Component-C5OwvnJs.js";import{F as B}from"./Footer_Component-DL7lJNye.js";import{N as D,u as I}from"./Navbar_Component-B0zYZGF-.js";import{u as k}from"./useOrderHistory-BxwqFh2n.js";import{_ as w,a as f,w as N,o as S,f as l,g as u,s as o,C as V,H as $,F,m as C,t as g,u as L,j as p,y as H,l as v}from"./index-DchyU0Ev.js";import{u as q}from"./useCheckOut-CGV_c3Ge.js";import{L as R}from"./LoadingView-CbCLkCTw.js";import"./useUserSignupStore-DDhU9uzK.js";const T={name:"OrderHistory_Component",components:{Button_Component:O},setup(){const i=k(),t=f([]),m=f("date"),n=H(),y=()=>{const e=i.orderHistory;let s=0;const r=setInterval(()=>{if(s<e.length){const c=e[s];t.value.some(b=>b.id===c.id)||t.value.push(c),a(),s++}else clearInterval(r)},500)},h=e=>{const s=i.orderHistory.find(c=>c.items.some(b=>b.id===e)),r=s?s.items.find(c=>c.id===e):null;return r?r.image:"default-image-url.jpg"},_=(e,s)=>{const r=i.orderHistory.findIndex(c=>c.id===e);if(r!==-1){const c=i.orderHistory[r];c.items=c.items.filter(b=>b.id!==s),c.items.length===0&&i.orderHistory.splice(r,1),t.value=i.orderHistory,localStorage.setItem("orderHistory",JSON.stringify(i.orderHistory))}},a=()=>{const e=[...t.value];m.value==="date"?e.sort((s,r)=>new Date(r.date)-new Date(s.date)):m.value==="alphabetical"&&e.sort((s,r)=>s.items[0].name.localeCompare(r.items[0].name)),t.value=e},d=e=>{const s=i.orderHistory.find(r=>r.id===e);s?(console.log("Delivery Details for Order ID:",e,s),n.push({name:"DeliveryDetails",params:{orderId:e}})):alert("Order not found!")};return N(m,a),S(()=>{const e=localStorage.getItem("orderHistory");e&&(i.orderHistory=JSON.parse(e)),y()}),{visibleOrders:t,getImageById:h,deleteItem:_,selectedSort:m,viewDeliveryDetails:d}}},j={class:"orderHistory"},z={class:"sortBy"},M={key:0},A={key:1},J={class:"order-card-container"},U={class:"order-card"},E=["src"],K={class:"order-details"},P={class:"product-info"},W={class:"item-header"},Y={class:"item-name"},G={class:"price-section"},Q={class:"item-price"},X={class:"quantity"},Z={style:{"font-weight":"bold"}},oo={class:"color-section"},to=["title"],eo={class:"order-date"},so={class:"deletebutton"},ro=["onClick"],no={class:"button-row"};function io(i,t,m,n,y,h){const _=v("Button_Component");return l(),u("div",j,[o("div",z,[t[2]||(t[2]=o("label",{for:"sort"},"Sort By:",-1)),V(o("select",{id:"sort","onUpdate:modelValue":t[0]||(t[0]=a=>n.selectedSort=a)},t[1]||(t[1]=[o("option",{value:"date"},"Date",-1),o("option",{value:"alphabetical"},"Product Name",-1)]),512),[[$,n.selectedSort]])]),n.visibleOrders.length===0?(l(),u("div",M,"No orders found.")):(l(),u("div",A,[(l(!0),u(F,null,C(n.visibleOrders,a=>(l(),u("div",{key:a.id,class:"order"},[o("div",J,[(l(!0),u(F,null,C(a.items,d=>(l(),u("div",{key:d.id},[o("div",U,[o("img",{src:n.getImageById(d.id),alt:"",class:"product-image"},null,8,E),o("div",K,[o("div",P,[o("div",W,[o("p",Y,g(d.name),1),o("div",G,[o("h2",Q," $"+g((d.price*d.quantity).toFixed(2)),1),o("p",X,"x"+g(d.quantity),1)])]),o("p",Z," Size: "+g(d.size||"N/A"),1),o("div",oo,[t[3]||(t[3]=o("span",{style:{"font-weight":"bold"}},"Color:",-1)),o("div",{class:"colorOption",style:L({backgroundColor:d.color||"#ccc"}),title:d.color||"No color provided"},null,12,to)]),o("p",eo,g(a.date),1),o("div",so,[o("button",{onClick:e=>n.deleteItem(a.id,d.id)},t[4]||(t[4]=[o("span",{class:"material-icons"},"delete",-1)]),8,ro)])])])]),o("div",no,[p(_,{id:"button-border","name-button":"Delivery Details","color-button":"#958383","background-color-button":"#FFFFFF","height-button":"40px","width-button":"150px",onClick:e=>n.viewDeliveryDetails(a.id)},null,8,["onClick"]),p(_,{id:"button-border","name-button":"Refund","color-button":"#958383","background-color-button":"#FFFFFF","height-button":"40px","width-button":"150px"}),p(_,{"name-button":"Re-Order","color-button":"#FFFFFF","background-color-button":"#564949","height-button":"40px","width-button":"150px"}),p(_,{"name-button":"Rate Us!","color-button":"#FFFFFF","background-color-button":"#564949","height-button":"40px","width-button":"150px"})])]))),128))])]))),128))]))])}const ao=w(T,[["render",io],["__scopeId","data-v-ac91f429"]]),co="/assets/empty-order-K4W1TqjA.png",lo={name:"OrderView",components:{Navbar_Component:D,LoadingView:R,Breadcrumb_Component:x,Footer_Component:B,OrderHistory_Component:ao,Button_Component:O},setup(){const i=f(!0),t=k(),m=q(),n=I(),y=H(),h=()=>{y.push("/category")};return S(()=>{m.checkOut.length>0&&(t.addOrderFromCheckout(m.checkOut),m.clearCheckOut()),n.clearCart(),setTimeout(()=>{i.value=!1},1e3)}),{isLoading:i,orderHistoryStore:t,goToShop:h}}},uo={class:"orderScreen"},mo={key:0,class:"load"},po={key:1,class:"container"},_o={key:0,class:"emptyOrder"},vo={key:1};function yo(i,t,m,n,y,h){const _=v("Navbar_Component"),a=v("LoadingView"),d=v("Breadcrumb_Component"),e=v("Button_Component"),s=v("OrderHistory_Component"),r=v("Footer_Component");return l(),u("div",uo,[p(_),n.isLoading?(l(),u("div",mo,[p(a)])):(l(),u("div",po,[p(d),n.orderHistoryStore.orderHistory.length===0?(l(),u("div",_o,[t[0]||(t[0]=o("img",{src:co,alt:"No Orders",class:"emptyImage"},null,-1)),t[1]||(t[1]=o("p",{class:"emptyMessage"},"You have no orders yet.",-1)),p(e,{class:"shopNowBtn","name-button":"Shop Now","backgroundColor-button":"#958383","height-button":"50px","width-button":"200px","color-button":"#FFFFFF",onClick:n.goToShop},null,8,["onClick"])])):(l(),u("div",vo,[t[2]||(t[2]=o("div",{class:"title"},[o("p",null,"Ordered")],-1)),p(s)]))])),p(r,{class:"footer"})])}const So=w(lo,[["render",yo],["__scopeId","data-v-185fec12"]]);export{So as default};
