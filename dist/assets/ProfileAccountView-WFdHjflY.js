import{B as k}from"./Breadcrumb_Component-D_DqCQk4.js";import{B as x}from"./Button_Component-tgwf09xt.js";import{F as V}from"./Footer_Component-BIkh6YzD.js";import{N as B}from"./Navbar_Component-CiQvBHpS.js";import{u as L}from"./useUserSignupStore-CRsTeUvy.js";import{_ as A,a as r,o as P,g as b,j as m,s as t,t as F,B as y,C as u,D as c,q as S,l as C,f as g,y as J}from"./index-CFOGQU_k.js";import{L as O}from"./LoadingView-Cc9w8Ri5.js";const N="/E_Commerce/assets/profile-Ct0P-4Lm.png",M={name:"ProfileAccountView",components:{Navbar_Component:B,Breadcrumb_Component:k,Button_Component:x,Footer_Component:V,LoadingView:O},setup(){const I=r(!0);P(()=>{setTimeout(()=>{I.value=!1},1e3)});const o=L(),E=J(),e=r(""),_=r(""),w=r(""),p=r(""),f=r(""),d=r(""),a=r(""),l=r(localStorage.getItem("profileImage")||N),n=r(!1);return P(()=>{const s=JSON.parse(localStorage.getItem("currentUser"));s&&(e.value=s.firstName||"",_.value=s.lastName||"",w.value=s.email||"",p.value=s.address||"",l.value=localStorage.getItem("profileImage")||N)}),{firstName:e,lastName:_,email:w,handleLogout:()=>{localStorage.removeItem("currentUser"),localStorage.removeItem("profileImage"),l.value=N,o.currentUser=null,E.push({path:"/signIn"})},saveInformation:()=>{const s=JSON.parse(localStorage.getItem("currentUser")),v=JSON.parse(localStorage.getItem("users"))||[];if(f.value||d.value||a.value){if(s.password!==f.value){alert("Incorrect current password");return}if(d.value!==a.value){alert("New password and confirm password do not match");return}}const i={...s,firstName:e.value,lastName:_.value,email:w.value,address:p.value,profileImageUrl:l.value,password:d.value||s.password};localStorage.setItem("currentUser",JSON.stringify(i)),o.currentUser=i;const U=v.findIndex(h=>h.email===s.email);U!==-1&&(v[U]=i),localStorage.setItem("users",JSON.stringify(v)),f.value="",d.value="",a.value="",n.value=!1,alert("Profile updated successfully")},cancelEdit:()=>{const s=JSON.parse(localStorage.getItem("currentUser"));s&&(e.value=s.firstName||"",_.value=s.lastName||"",w.value=s.email||"",p.value=s.address||""),l.value=localStorage.getItem("profileImage")||"default-image.png",n.value=!1},address:p,currentPassword:f,newPassword:d,confirmPassword:a,isEditing:n,profileImageUrl:l,onImageUpload:s=>{const v=s.target.files[0];if(v){const i=new FileReader;i.onload=()=>{l.value=i.result,localStorage.setItem("profileImage",i.result)},i.readAsDataURL(v)}},isLoading:I}}},D={class:"profileContainer"},R={key:0,class:"load"},T={key:1},W={class:"navWithName"},j={class:"welcome"},q={style:{color:"#564949"}},Y={class:"showInfo"},z={class:"select"},G={class:"dashboardEdit"},H={class:"uploadImage"},K=["src"],Q={class:"name"},X={class:"firstName"},Z=["readonly"],$={class:"lastName"},oo=["readonly"],eo={class:"email"},to={class:"emailInput"},no=["readonly"],so={class:"address"},ao=["readonly"],ro={class:"password"},lo={class:"currentPassword"},io=["readonly"],mo={class:"newPassword"},uo=["readonly"],co={class:"confirmPassword"},go=["readonly"],po={class:"button"},fo={key:0,class:"saveAndCancel"};function vo(I,o,E,e,_,w){const p=C("Navbar_Component"),f=C("LoadingView"),d=C("Breadcrumb_Component"),a=C("Button_Component"),l=C("Footer_Component");return g(),b("div",D,[m(p),e.isLoading?(g(),b("div",R,[m(f)])):(g(),b("div",T,[t("div",W,[m(d,{class:"breadcrumb"}),t("div",j,[o[10]||(o[10]=t("p",null,"Welcome to!",-1)),t("p",q,F(e.firstName)+" "+F(e.lastName),1)])]),o[19]||(o[19]=t("div",{class:"titlePage"},[t("p",null,"Manage My Account")],-1)),t("div",Y,[t("div",z,[m(a,{"name-button":"My Profile","backgroundColor-button":"#868181","height-button":"60px","width-button":"250px","color-button":"#FFFFFF",icon:"person"}),m(a,{style:{"margin-top":"2%"},"name-button":"Logout","backgroundColor-button":"#E5E0E0","height-button":"60px","width-button":"250px","color-button":"#E41C1C",icon:"logout",onClick:o[0]||(o[0]=n=>e.handleLogout())})]),t("div",G,[o[18]||(o[18]=t("div",{class:"edit"},[t("span",{class:"material-icons"},"edit"),t("p",null,"Edit Your Profile")],-1)),t("div",H,[t("img",{src:e.profileImageUrl,alt:""},null,8,K),e.isEditing?(g(),b("input",{key:0,type:"file",onChange:o[1]||(o[1]=(...n)=>e.onImageUpload&&e.onImageUpload(...n))},null,32)):y("",!0)]),t("div",Q,[t("div",X,[o[11]||(o[11]=t("label",{for:""}," First Name *",-1)),u(t("input",{type:"text","onUpdate:modelValue":o[2]||(o[2]=n=>e.firstName=n),readonly:!e.isEditing},null,8,Z),[[c,e.firstName]])]),t("div",$,[o[12]||(o[12]=t("label",{for:""}," Last Name *",-1)),u(t("input",{type:"text","onUpdate:modelValue":o[3]||(o[3]=n=>e.lastName=n),readonly:!e.isEditing},null,8,oo),[[c,e.lastName]])])]),t("div",eo,[t("div",to,[o[13]||(o[13]=t("label",{for:""}," Email *",-1)),u(t("input",{type:"text","onUpdate:modelValue":o[4]||(o[4]=n=>e.email=n),readonly:!e.isEditing},null,8,no),[[c,e.email]])]),t("div",so,[o[14]||(o[14]=t("label",{for:""}," Address",-1)),u(t("input",{type:"text","onUpdate:modelValue":o[5]||(o[5]=n=>e.address=n),readonly:!e.isEditing},null,8,ao),[[c,e.address]])])]),t("div",ro,[t("div",lo,[o[15]||(o[15]=t("label",{for:""}," Current Password",-1)),u(t("input",{type:"password",placeholder:"Current Password","onUpdate:modelValue":o[6]||(o[6]=n=>e.currentPassword=n),readonly:!e.isEditing},null,8,io),[[c,e.currentPassword]])]),t("div",mo,[o[16]||(o[16]=t("label",{for:""}," New Password",-1)),u(t("input",{type:"password",placeholder:"New Password","onUpdate:modelValue":o[7]||(o[7]=n=>e.newPassword=n),readonly:!e.isEditing},null,8,uo),[[c,e.newPassword]])]),t("div",co,[o[17]||(o[17]=t("label",{for:""}," Confirm Password",-1)),u(t("input",{type:"password",placeholder:"Confirm Password","onUpdate:modelValue":o[8]||(o[8]=n=>e.confirmPassword=n),readonly:!e.isEditing},null,8,go),[[c,e.confirmPassword]])])]),t("div",po,[e.isEditing?y("",!0):(g(),S(a,{key:0,"name-button":"Edit","backgroundColor-button":"#958383","height-button":"50px","width-button":"200px","color-button":"#FFFFFF",icon:"edit",onClick:o[9]||(o[9]=n=>e.isEditing=!0)}))]),e.isEditing?(g(),b("div",fo,[e.isEditing?(g(),S(a,{key:0,"name-button":"Save","backgroundColor-button":"#958383","height-button":"50px","width-button":"150px","color-button":"#FFFFFF",icon:"save",onClick:e.saveInformation},null,8,["onClick"])):y("",!0),m(a,{"name-button":"Cancel","backgroundColor-button":"#958383","height-button":"50px","width-button":"150px","color-button":"#E41C1C",icon:"cancel",onClick:e.cancelEdit},null,8,["onClick"])])):y("",!0)])]),m(l,{style:{"margin-left":"1%","margin-top":"5%"}})]))])}const So=A(M,[["render",vo],["__scopeId","data-v-28112948"]]);export{So as default};
