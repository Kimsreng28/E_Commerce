import{B as j}from"./Breadcrumb_Component-hauAcdFA.js";import{B}from"./Button_Component-Bseh6dy0.js";import{C as J}from"./CardCheckProduct_Component-ClzvMZ3u.js";import{u as E,N as R}from"./Navbar_Component-ZR1cQJ3T.js";import{_ as D,c as x,a as h,w as $,f as r,g as d,s as e,t as u,v as H,B as F,x as M,j as y,k as z,T as Q,F as I,m as V,l as _,C as w,I as Y,D as L,A as G,z as K,o as X,q as O}from"./index-CtQclHPH.js";import{F as W}from"./Footer_Component-Dtm_2BHz.js";import{u as q}from"./useCheckOut-CV47Pdpq.js";import{u as Z}from"./useOrderHistory-DlpyJIRB.js";import{L as tt}from"./LoadingView-CAG0qKEz.js";import"./useUserSignupStore-Kl5PjanY.js";const et={name:"ConfirmSum_Component",props:{titleSummary:{type:String,default:"Confirmed Payment"}},setup(){const c=E(),t=x(()=>c.getSubtotal),a=h(parseFloat(localStorage.getItem("discountPrice"))||0),o=.25,s=x(()=>t.value+o-a.value);return $(a,i=>{i<=0&&localStorage.setItem("discountPrice","0")}),{subtotalPrice:t,discountPrice:a,shippingPrice:o,totalPrice:s}}},ot={class:"priceSummary"},nt={class:"titleSummary"},at={class:"subtotalPrice"},st={class:"shipping"},ct={class:"discount"},rt={key:0,class:"negative"},lt={key:1},dt={class:"totalPrice"};function it(c,t,a,o,s,i){return r(),d("div",ot,[e("div",nt,[e("p",null,u(a.titleSummary),1)]),e("div",at,[t[0]||(t[0]=e("p",null,"Subtotal:",-1)),e("p",null,"$"+u(o.subtotalPrice.toFixed(2)),1)]),t[4]||(t[4]=e("div",{class:"hr"},[e("hr")],-1)),e("div",st,[t[1]||(t[1]=e("p",null,"Shipping:",-1)),e("p",null,"$"+u(o.shippingPrice.toFixed(2)),1)]),t[5]||(t[5]=e("div",{class:"hr"},[e("hr")],-1)),e("div",ct,[t[2]||(t[2]=e("p",null,"Discount:",-1)),o.discountPrice>0?(r(),d("p",rt,"- $"+u(o.discountPrice.toFixed(2)),1)):(r(),d("p",lt,"$0.00"))]),t[6]||(t[6]=e("div",{class:"hr"},[e("hr")],-1)),e("div",dt,[t[3]||(t[3]=e("p",null,"Total:",-1)),e("p",null,"$"+u(o.totalPrice.toFixed(2)),1)])])}const ut=D(et,[["render",it],["__scopeId","data-v-7fdd4cbc"]]),mt=H("locationStore",{state:()=>({locations:JSON.parse(localStorage.getItem("locations"))||[],selectedLocation:null}),actions:{addLocation(c){this.locations.push(c),this.saveToLocalStorage()},setSelectedLocation(c){this.selectedLocation=c},saveToLocalStorage(){localStorage.setItem("locations",JSON.stringify(this.locations))}}}),pt={name:"Location_Component",components:{Button_Component:B},emits:["update:location"],setup(c,{emit:t}){const a=mt(),o=h(!1),s=h({fullName:"",streetAddress:"",apartment:"",city:"",phoneNumber:""}),i=x(()=>a.locations);return{showDropdown:o,newLocation:s,locations:i,toggleDropdown:()=>{o.value=!o.value},addLocation:()=>{const{fullName:m,streetAddress:f,apartment:p,city:k,phoneNumber:N}=s.value;if(!m||!f||!k||!N){alert("Please fill in all required fields.");return}a.addLocation({fullName:m,streetAddress:f,apartment:p||"",city:k,phoneNumber:N,selected:!1}),s.value={fullName:"",streetAddress:"",apartment:"",city:"",phoneNumber:""},o.value=!1},formatAddress:m=>{const{streetAddress:f,apartment:p,city:k}=m;return`${f}${p?`, ${p}`:""}, ${k}`},selectLocation:m=>{i.value.forEach((p,k)=>{p.selected=k===m});const f=i.value[m];a.selectedLocation=f,t("update:location",f)}}}},_t={key:0,class:"material-icons"},yt={class:"dropdown"},ht={class:"inputName"},vt={class:"inputAddress"},Ct={class:"inputFloor"},gt={class:"inputCity"},Pt={class:"inputNumberPhone"},bt={class:"buttonAdd"},ft=["onClick"],kt={class:"show"},St={class:"material-icons"};function wt(c,t,a,o,s,i){const v=_("Button_Component");return r(),d("div",{class:M(["location",{expanded:o.showDropdown}])},[t[13]||(t[13]=e("div",{class:"title"},[e("p",null,"Location for shipping")],-1)),t[14]||(t[14]=e("hr",null,null,-1)),e("div",{class:"add",onClick:t[0]||(t[0]=(...n)=>o.toggleDropdown&&o.toggleDropdown(...n))},[o.showDropdown?F("",!0):(r(),d("span",_t," add ")),o.showDropdown?(r(),d("span",{key:1,class:M(["material-icons",{rotated:o.showDropdown}])}," keyboard_arrow_down ",2)):F("",!0),t[6]||(t[6]=e("p",null,"Add new locations",-1))]),y(Q,{name:"dropdown"},{default:z(()=>[w(e("div",yt,[e("div",ht,[t[7]||(t[7]=e("p",null,"Full Name",-1)),w(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=n=>o.newLocation.fullName=n)},null,512),[[L,o.newLocation.fullName]])]),e("div",vt,[t[8]||(t[8]=e("p",null,"Street Address",-1)),w(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=n=>o.newLocation.streetAddress=n)},null,512),[[L,o.newLocation.streetAddress]])]),e("div",Ct,[t[9]||(t[9]=e("p",null,"Apartment, floor, etc. (optional)",-1)),w(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=n=>o.newLocation.apartment=n)},null,512),[[L,o.newLocation.apartment]])]),e("div",gt,[t[10]||(t[10]=e("p",null,"Town/City",-1)),w(e("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=n=>o.newLocation.city=n)},null,512),[[L,o.newLocation.city]])]),e("div",Pt,[t[11]||(t[11]=e("p",null,"Phone Number",-1)),w(e("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=n=>o.newLocation.phoneNumber=n)},null,512),[[L,o.newLocation.phoneNumber]])]),e("div",bt,[y(v,{"name-button":"Add","color-button":"#FFFFFF","background-color-button":"#564949","height-button":"40px","width-button":"115px",onClick:o.addLocation},null,8,["onClick"])])],512),[[Y,o.showDropdown]])]),_:1}),(r(!0),d(I,null,V(o.locations,(n,C)=>(r(),d("div",{class:M(["showLocation",{selected:n.selected}]),key:C,onClick:g=>o.selectLocation(C)},[e("div",kt,[t[12]||(t[12]=e("span",{class:"material-icons"},"home",-1)),e("p",null,u(o.formatAddress(n)),1)]),e("span",St,u(n.selected?"check_circle":"radio_button_unchecked"),1)],10,ft))),128))],2)}const Lt=D(pt,[["render",wt],["__scopeId","data-v-52ae6bd2"]]),T="/assets/card-Ca2jl0RY.png",U="/assets/visa-afyQHn1c.png",Nt=H("paymentStore",{state:()=>({payments:JSON.parse(localStorage.getItem("payments"))||[],selectedPayment:null}),actions:{addPayment(c){this.payments.push(c),this.saveToLocalStorage()},setSelectedPayment(c){this.selectedPayment=c},saveToLocalStorage(){localStorage.setItem("payments",JSON.stringify(this.payments))}}}),xt={name:"Payment_Component",components:{Button_Component:B},props:{paymentMethod:String},setup(c,{emit:t}){const a=Nt(),o=h([{name:"Visa",icon:U},{name:"MasterCard",icon:T},{name:"ABA",icon:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSUIHKcKRFtUDWjJ2A0SHGyDvzcXhkCfy7m9WfpiUn23JRSGccFqF_0g9G7qS7_3ePLerM&usqp=CAU"},{name:"ACLEDA",icon:"https://ibccambodia.com/wp-content/uploads/2021/02/ACLEDA-Logo-Existing-New-one-07-2-e1613988422171.png"}]),s=h(null),i={ABA:"https://i.ibb.co/t3fpgxv/photo-2024-12-01-18-21-24.jpg",ACLEDA:"https://i.ibb.co/tKnK4T8/photo-2024-12-01-18-21-18.jpg"},v=l=>i[l]||"https://via.placeholder.com/150x150",n=h({name:"",cardNumber:"",expiry:"",cvv:""}),C=x(()=>a.payments),g=h(null);return{paymentMethods:o,selectedPaymentMethod:s,getQrCode:v,cardDetails:n,savedCards:C,selectedCard:g,togglePaymentMethod:l=>{s.value===l.name?s.value=null:s.value=l.name,t("update:paymentMethod",s.value)},toggleSavedCard:l=>{g.value===l?(g.value=null,a.selectedPayment=null):(g.value=l,a.selectedPayment=l,s.value=l.type),t("update:paymentMethod",s.value)},getCardIcon:l=>l==="Visa"?U:l==="MasterCard"?T:null,addCard:()=>{const{name:l,cardNumber:P,expiry:b,cvv:A}=n.value;if(!l||!P||!b||!A){alert("Please fill in all the card details.");return}const S={type:s.value,name:l,cardNumber:P,expiry:b,cvv:A};a.addPayment(S),alert(`Card for ${l} added successfully!`),n.value={name:"",cardNumber:"",expiry:"",cvv:""},s.value=null},maskCardNumber:l=>l.replace(/\d(?=\d{4})/g,"*")}}},Mt={class:"location"},Ft={class:"method"},Dt=["onClick"],At=["src","alt"],It={class:"details"},Vt={key:0,class:"card-details"},Bt={class:"titleCard"},Ot={class:"inputName"},qt={class:"inputCardNumber"},Tt={class:"inputExpired"},Ut={class:"inputCVV"},Et={class:"buttonAdd"},$t={key:1,class:"qr-code"},Ht=["src"],zt={class:"showCard"},jt=["onClick"],Jt={class:"detailCard"},Rt=["src"],Qt={class:"material-icons"};function Yt(c,t,a,o,s,i){const v=_("Button_Component");return r(),d("div",Mt,[t[10]||(t[10]=e("div",{class:"title"},[e("p",null,"Select Payment Method")],-1)),t[11]||(t[11]=e("hr",null,null,-1)),e("div",Ft,[(r(!0),d(I,null,V(o.paymentMethods,(n,C)=>(r(),d("div",{class:M(["payment-option",{selected:o.selectedPaymentMethod===n.name}]),key:C,onClick:g=>o.togglePaymentMethod(n)},[e("img",{src:n.icon,alt:n.name},null,8,At),e("p",null,u(n.name),1)],10,Dt))),128))]),e("div",It,[(o.selectedPaymentMethod==="Visa"||o.selectedPaymentMethod==="MasterCard")&&!o.selectedCard?(r(),d("div",Vt,[e("div",Bt,[e("p",null,[t[4]||(t[4]=G(" Add a New Card for ")),e("span",null,u(o.selectedPaymentMethod),1)])]),e("div",Ot,[t[5]||(t[5]=e("p",null,"Name on Card",-1)),w(e("input",{type:"text",placeholder:"Enter name","onUpdate:modelValue":t[0]||(t[0]=n=>o.cardDetails.name=n)},null,512),[[L,o.cardDetails.name]])]),e("div",qt,[t[6]||(t[6]=e("p",null,"Card Number",-1)),w(e("input",{type:"text",placeholder:"Enter card number","onUpdate:modelValue":t[1]||(t[1]=n=>o.cardDetails.cardNumber=n)},null,512),[[L,o.cardDetails.cardNumber]])]),e("div",Tt,[t[7]||(t[7]=e("p",null,"Expiry Date",-1)),w(e("input",{type:"text",placeholder:"MM/YY","onUpdate:modelValue":t[2]||(t[2]=n=>o.cardDetails.expiry=n)},null,512),[[L,o.cardDetails.expiry]])]),e("div",Ut,[t[8]||(t[8]=e("p",null,"CVV",-1)),w(e("input",{type:"text",placeholder:"CVV","onUpdate:modelValue":t[3]||(t[3]=n=>o.cardDetails.cvv=n)},null,512),[[L,o.cardDetails.cvv]])]),e("div",Et,[y(v,{"name-button":"Add Card","color-button":"#FFFFFF","background-color-button":"#564949","height-button":"40px","width-button":"115px",onClick:o.addCard},null,8,["onClick"])])])):F("",!0),o.selectedPaymentMethod==="ABA"||o.selectedPaymentMethod==="ACLEDA"?(r(),d("div",$t,[e("p",null," Scan the QR Code below to proceed with payment "+u(o.selectedPaymentMethod)+": ",1),e("img",{src:o.getQrCode(o.selectedPaymentMethod),alt:"QR Code"},null,8,Ht)])):F("",!0)]),e("div",zt,[t[9]||(t[9]=e("p",null,"Your Cards",-1)),(r(!0),d(I,null,V(o.savedCards,(n,C)=>(r(),d("div",{key:C,class:M(["saved-card",{selected:o.selectedCard===n}]),onClick:g=>o.toggleSavedCard(n)},[e("div",Jt,[e("img",{src:o.getCardIcon(n.type),alt:"Card Icon",class:"card-icon"},null,8,Rt),e("p",null,"Card Number: "+u(o.maskCardNumber(n.cardNumber)),1)]),e("span",Qt,u(o.selectedCard===n?"check_circle":"radio_button_unchecked"),1)],10,jt))),128))])])}const Gt=D(xt,[["render",Yt],["__scopeId","data-v-6d504ab5"]]),Kt={name:"PaymentSuccess_Component",components:{Button_Component:B},props:{totalPrice:{type:[String,Number],required:!0},paymentMethod:{type:String,required:!0},transactionId:{type:String,required:!0},transactionDate:{type:String,required:!0}},methods:{goToOrderHistory(){this.$router.push("/order")}}},Xt={class:"paymentAlert"},Wt={class:"info"},Zt={class:"totalPrice"},te={class:"paymentMethod"},ee={class:"transactionId"},oe={class:"transactionDate"},ne={class:"btn"},ae={class:"history"},se={class:"returnHome"};function ce(c,t,a,o,s,i){const v=_("Button_Component"),n=_("router-link");return r(),d("div",Xt,[t[0]||(t[0]=K('<div class="success-animation" data-v-e8ab27b6><svg class="checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52" data-v-e8ab27b6><circle class="checkmark__circle" cx="26" cy="26" r="25" fill="none" data-v-e8ab27b6></circle><path class="checkmark__check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8" data-v-e8ab27b6></path></svg></div><p class="success-message" data-v-e8ab27b6>Payment successful!</p><div class="thank" data-v-e8ab27b6> Thank you for your payment. Your order has been processed successfully. </div>',3)),e("div",Wt,[e("p",Zt,"Amount: $"+u(a.totalPrice.toFixed(2)),1),e("p",te,"Payment Method: "+u(a.paymentMethod),1),e("p",ee,"Transaction ID: "+u(a.transactionId),1),e("p",oe,"Transaction Date: "+u(a.transactionDate),1)]),e("div",ne,[y(n,{to:"/order"},{default:z(()=>[e("div",ae,[y(v,{"name-button":"View Order History","width-button":"200px","height-button":"50px","background-color-button":"#564949","color-button":"#FFFFFF"})])]),_:1}),e("div",se,[y(v,{"name-button":"Return to Home","width-button":"200px","height-button":"50px","color-button":"#EC2929"})])])])}const re=D(Kt,[["render",ce],["__scopeId","data-v-e8ab27b6"]]),le={name:"CheckOutView",components:{Navbar_Component:R,Breadcrumb_Component:j,Location_Component:Lt,PaymentMethod_Component:Gt,CardCheckProduct_Component:J,Footer_Component:W,Button_Component:B,LoadingView:tt,PaymentSuccess_Component:re,ConfirmSum_Component:ut},setup(){const c=E(),t=h(!0),a=h(!1),o=h(""),s=h("TXN123456789"),i=h(new Date().toLocaleString()),v=x(()=>c.getSubtotal),n=h(parseFloat(localStorage.getItem("discountPrice"))||0),C=.25,g=x(()=>v.value+C-n.value);$(n,b=>{b<=0&&localStorage.setItem("discountPrice","0")});const m=q(),f=Z(),p=h("");X(()=>{setTimeout(()=>{t.value=!1},1e3)});const k=b=>{console.log("Selected Location:",b),p.value=b},N=b=>{console.log("Selected Payment Method:",b),o.value=b},l=()=>{localStorage.setItem("discountPrice","0")};return{isLoading:t,isPaymentSuccess:a,selectedPaymentMethod:o,transactionId:s,transactionDate:i,updateLocation:k,updatePaymentMethod:N,handlePayNow:()=>{if(!o.value){alert("Please select a payment method.");return}if(!p.value){alert("Please select a shipping location.");return}const b=Array.isArray(m.checkOut)?m.checkOut:Object.values(m.checkOut);console.log("CheckOut Items: ",b),a.value=!0,l(),s.value=`TXN${Math.floor(Math.random()*1e9)}`;const A={id:s.value,date:i.value,items:b.map(S=>({id:S.id,name:S.name,image:S.image||"default-image-url.jpg",quantity:S.quantity,price:S.price,discount:S.discount,finalPrice:S.finalPrice,color:S.color,size:S.size})),totalPrice:g.value,paymentMethod:o.value,shippingLocation:p.value};f.addOrderFromCheckout(A),c.clearCart(),setTimeout(()=>{a.value=!1},5e3)},totalPrice:g,selectedLocation:p}},computed:{checkOutItems(){return q().checkOut.map(t=>{const a=parseFloat(t.discount.replace("%",""))||0,o=t.price*a/100,s=t.price-o;return{...t,discountPrice:o,finalPrice:s}})},shippingPrice(){return .25},subtotalPrice(){return this.checkOutItems.reduce((c,t)=>c+t.finalPrice*t.quantity,0)},totalDiscountPrice(){return this.checkOutItems.reduce((c,t)=>c+t.discountPrice*t.quantity,0)}}},de={class:"checkoutScreen"},ie={key:0,class:"load"},ue={key:1},me={class:"container"},pe={class:"left"},_e={class:"right"},ye={class:"payNow"},he={key:2,class:"showSuccess"};function ve(c,t,a,o,s,i){const v=_("Navbar_Component"),n=_("LoadingView"),C=_("Breadcrumb_Component"),g=_("Location_Component"),m=_("PaymentMethod_Component"),f=_("CardCheckProduct_Component"),p=_("ConfirmSum_Component"),k=_("Button_Component"),N=_("Footer_Component"),l=_("PaymentSuccess_Component");return r(),d("div",de,[y(v),o.isLoading?(r(),d("div",ie,[y(n)])):(r(),d("div",ue,[y(C),t[0]||(t[0]=e("div",{class:"title"},[e("h1",{style:{"font-family":"Saira, sans-serif"}},"Check Out")],-1)),e("div",me,[e("div",pe,[y(g,{"onUpdate:location":o.updateLocation},null,8,["onUpdate:location"]),y(m,{style:{"margin-top":"5%"},"onUpdate:paymentMethod":o.updatePaymentMethod},null,8,["onUpdate:paymentMethod"])]),e("div",_e,[(r(!0),d(I,null,V(i.checkOutItems,P=>(r(),O(f,{style:{"margin-bottom":"3%"},class:"cardCheck",key:P.id,id:P.id,imageProduct:P.image,discountProduct:P.discount,nameProduct:P.name,priceProduct:P.price,quantity:P.quantity,"color-product":P.color,"size-product":P.size,fromCheckout:!0,showDeleteButton:!1},null,8,["id","imageProduct","discountProduct","nameProduct","priceProduct","quantity","color-product","size-product"]))),128)),y(p)])]),e("div",ye,[y(k,{"name-button":"Pay Now","color-button":"#FFFFFF","background-color-button":"#958383","height-button":"50px","width-button":"200px",onClick:o.handlePayNow},null,8,["onClick"])]),y(N,{style:{"margin-top":"5%"}})])),o.isPaymentSuccess?(r(),d("div",he,[(r(),O(l,{key:o.isPaymentSuccess,totalPrice:o.totalPrice,paymentMethod:o.selectedPaymentMethod,transactionId:o.transactionId,transactionDate:o.transactionDate,location:o.selectedLocation},null,8,["totalPrice","paymentMethod","transactionId","transactionDate","location"]))])):F("",!0)])}const xe=D(le,[["render",ve],["__scopeId","data-v-4d07e2ae"]]);export{xe as default};
