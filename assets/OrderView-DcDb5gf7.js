import{B as x}from"./Breadcrumb_Component-Co-8O1x_.js";import{B as O}from"./Button_Component-BslC29Dg.js";import{F as B}from"./Footer_Component-JhSoATJ7.js";import{N as D}from"./Navbar_Component-CWWY1Zf6.js";import{u as k}from"./useOrderHistory-CR-M07jS.js";import{_ as w,a as f,w as I,o as H,f as l,g as u,s as o,C as N,H as V,F,m as C,t as b,u as $,j as p,y as S,l as v}from"./index-CM7MdMiN.js";import{u as L}from"./useCheckOut-CzYeXUmz.js";import{L as q}from"./LoadingView-D8r7OzeQ.js";import"./useUserSignupStore-u2h-RB6q.js";const R={name:"OrderHistory_Component",components:{Button_Component:O},setup(){const i=k(),t=f([]),m=f("date"),n=S(),y=()=>{const e=i.orderHistory;let s=0;const r=setInterval(()=>{if(s<e.length){const c=e[s];t.value.some(h=>h.id===c.id)||t.value.push(c),a(),s++}else clearInterval(r)},500)},g=e=>{const s=i.orderHistory.find(c=>c.items.some(h=>h.id===e)),r=s?s.items.find(c=>c.id===e):null;return r?r.image:"default-image-url.jpg"},_=(e,s)=>{const r=i.orderHistory.findIndex(c=>c.id===e);if(r!==-1){const c=i.orderHistory[r];c.items=c.items.filter(h=>h.id!==s),c.items.length===0&&i.orderHistory.splice(r,1),t.value=i.orderHistory,localStorage.setItem("orderHistory",JSON.stringify(i.orderHistory))}},a=()=>{const e=[...t.value];m.value==="date"?e.sort((s,r)=>new Date(r.date)-new Date(s.date)):m.value==="alphabetical"&&e.sort((s,r)=>s.items[0].name.localeCompare(r.items[0].name)),t.value=e},d=e=>{const s=i.orderHistory.find(r=>r.id===e);s?(console.log("Delivery Details for Order ID:",e,s),n.push({name:"DeliveryDetails",params:{orderId:e}})):alert("Order not found!")};return I(m,a),H(()=>{const e=localStorage.getItem("orderHistory");e&&(i.orderHistory=JSON.parse(e)),y()}),{visibleOrders:t,getImageById:g,deleteItem:_,selectedSort:m,viewDeliveryDetails:d}}},T={class:"orderHistory"},j={class:"sortBy"},z={key:0},M={key:1},A={class:"order-card-container"},J={class:"order-card"},U=["src"],E={class:"order-details"},K={class:"product-info"},P={class:"item-header"},W={class:"item-name"},Y={class:"price-section"},G={class:"item-price"},Q={class:"quantity"},X={style:{"font-weight":"bold"}},Z={class:"color-section"},oo=["title"],to={class:"order-date"},eo={class:"deletebutton"},so=["onClick"],ro={class:"button-row"};function no(i,t,m,n,y,g){const _=v("Button_Component");return l(),u("div",T,[o("div",j,[t[2]||(t[2]=o("label",{for:"sort"},"Sort By:",-1)),N(o("select",{id:"sort","onUpdate:modelValue":t[0]||(t[0]=a=>n.selectedSort=a)},t[1]||(t[1]=[o("option",{value:"date"},"Date",-1),o("option",{value:"alphabetical"},"Product Name",-1)]),512),[[V,n.selectedSort]])]),n.visibleOrders.length===0?(l(),u("div",z,"No orders found.")):(l(),u("div",M,[(l(!0),u(F,null,C(n.visibleOrders,a=>(l(),u("div",{key:a.id,class:"order"},[o("div",A,[(l(!0),u(F,null,C(a.items,d=>(l(),u("div",{key:d.id},[o("div",J,[o("img",{src:n.getImageById(d.id),alt:"",class:"product-image"},null,8,U),o("div",E,[o("div",K,[o("div",P,[o("p",W,b(d.name),1),o("div",Y,[o("h2",G," $"+b((d.price*d.quantity).toFixed(2)),1),o("p",Q,"x"+b(d.quantity),1)])]),o("p",X," Size: "+b(d.size||"N/A"),1),o("div",Z,[t[3]||(t[3]=o("span",{style:{"font-weight":"bold"}},"Color:",-1)),o("div",{class:"colorOption",style:$({backgroundColor:d.color||"#ccc"}),title:d.color||"No color provided"},null,12,oo)]),o("p",to,b(a.date),1),o("div",eo,[o("button",{onClick:e=>n.deleteItem(a.id,d.id)},t[4]||(t[4]=[o("span",{class:"material-icons"},"delete",-1)]),8,so)])])])]),o("div",ro,[p(_,{id:"button-border","name-button":"Delivery Details","color-button":"#958383","background-color-button":"#FFFFFF","height-button":"40px","width-button":"150px",onClick:e=>n.viewDeliveryDetails(a.id)},null,8,["onClick"]),p(_,{id:"button-border","name-button":"Refund","color-button":"#958383","background-color-button":"#FFFFFF","height-button":"40px","width-button":"150px"}),p(_,{"name-button":"Re-Order","color-button":"#FFFFFF","background-color-button":"#564949","height-button":"40px","width-button":"150px"}),p(_,{"name-button":"Rate Us!","color-button":"#FFFFFF","background-color-button":"#564949","height-button":"40px","width-button":"150px"})])]))),128))])]))),128))]))])}const io=w(R,[["render",no],["__scopeId","data-v-ac91f429"]]),ao="/assets/empty-order-K4W1TqjA.png",co={name:"OrderView",components:{Navbar_Component:D,LoadingView:q,Breadcrumb_Component:x,Footer_Component:B,OrderHistory_Component:io,Button_Component:O},setup(){const i=f(!0),t=k(),m=L(),n=S(),y=()=>{n.push("/category")};return H(()=>{m.checkOut.length>0&&(t.addOrderFromCheckout(m.checkOut),m.clearCheckOut()),setTimeout(()=>{i.value=!1},1e3)}),{isLoading:i,orderHistoryStore:t,goToShop:y}}},lo={class:"orderScreen"},uo={key:0,class:"load"},mo={key:1,class:"container"},po={key:0,class:"emptyOrder"},_o={key:1};function vo(i,t,m,n,y,g){const _=v("Navbar_Component"),a=v("LoadingView"),d=v("Breadcrumb_Component"),e=v("Button_Component"),s=v("OrderHistory_Component"),r=v("Footer_Component");return l(),u("div",lo,[p(_),n.isLoading?(l(),u("div",uo,[p(a)])):(l(),u("div",mo,[p(d),n.orderHistoryStore.orderHistory.length===0?(l(),u("div",po,[t[0]||(t[0]=o("img",{src:ao,alt:"No Orders",class:"emptyImage"},null,-1)),t[1]||(t[1]=o("p",{class:"emptyMessage"},"You have no orders yet.",-1)),p(e,{class:"shopNowBtn","name-button":"Shop Now","backgroundColor-button":"#958383","height-button":"50px","width-button":"200px","color-button":"#FFFFFF",onClick:n.goToShop},null,8,["onClick"])])):(l(),u("div",_o,[t[2]||(t[2]=o("div",{class:"title"},[o("p",null,"Ordered")],-1)),p(s)]))])),p(r,{class:"footer"})])}const wo=w(co,[["render",vo],["__scopeId","data-v-dd8ca381"]]);export{wo as default};
