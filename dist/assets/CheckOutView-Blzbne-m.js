import{B as H}from"./Breadcrumb_Component-DKdRsi0y.js";import{B as O}from"./Button_Component-C5OwvnJs.js";import{_ as F,c as x,f as l,g as r,s as t,t as d,u as J,B as M,a as y,w as U,v as z,x as D,j as C,k as E,T as Q,F as I,m as V,l as _,C as w,I as R,D as L,A as Y,z as G,o as K,q}from"./index-DchyU0Ev.js";import{u as j,N as X}from"./Navbar_Component-B0zYZGF-.js";import{F as W}from"./Footer_Component-DL7lJNye.js";import{u as B}from"./useCheckOut-CGV_c3Ge.js";import{u as Z}from"./useOrderHistory-BxwqFh2n.js";import{L as tt}from"./LoadingView-CbCLkCTw.js";import"./useUserSignupStore-DDhU9uzK.js";const et={name:"CheckOutItem_Component",props:{id:Number,imageProduct:String,nameProduct:String,sizeProduct:Array,colorProduct:Array,priceProduct:Number,quantity:{type:Number,default:1}},setup(a){return{totalPrice:x(()=>a.priceProduct*a.quantity)}}},ot={class:"cartCheck"},nt={class:"image"},st=["src"],at={class:"detail"},ct={class:"set"},lt={class:"name"},rt={class:"size"},it={key:0,class:"color"},dt={class:"price"},ut={class:"quantity"},mt={class:"quantityProduct"},pt={class:"number"};function _t(a,e,s,o,c,u){return l(),r("div",ot,[t("div",nt,[t("img",{src:s.imageProduct,alt:""},null,8,st)]),t("div",at,[t("div",ct,[t("div",lt,[t("p",null,d(s.nameProduct),1)]),t("div",rt,[t("p",null,"Size: "+d(s.sizeProduct),1)]),s.colorProduct?(l(),r("div",it,[e[0]||(e[0]=t("p",null,"Color:",-1)),t("div",{class:"colorDisplay",style:J({backgroundColor:s.colorProduct})},null,4)])):M("",!0),t("div",dt,[t("p",null,"$"+d(o.totalPrice),1)])]),t("div",ut,[t("div",mt,[t("div",pt,[t("p",null,"x"+d(s.quantity),1)])])])])])}const yt=F(et,[["render",_t],["__scopeId","data-v-f3f42a29"]]),vt={name:"ConfirmSum_Component",props:{titleSummary:{type:String,default:"Confirmed Payment"}},setup(){const a=j(),e=x(()=>a.getSubtotal),s=y(parseFloat(localStorage.getItem("discountPrice"))||0),o=.25,c=x(()=>e.value+o-s.value);return U(s,u=>{u<=0&&localStorage.setItem("discountPrice","0")}),{subtotalPrice:e,discountPrice:s,shippingPrice:o,totalPrice:c}}},ht={class:"priceSummary"},Ct={class:"titleSummary"},gt={class:"subtotalPrice"},Pt={class:"shipping"},ft={class:"discount"},bt={key:0,class:"negative"},kt={key:1},St={class:"totalPrice"};function wt(a,e,s,o,c,u){return l(),r("div",ht,[t("div",Ct,[t("p",null,d(s.titleSummary),1)]),t("div",gt,[e[0]||(e[0]=t("p",null,"Subtotal:",-1)),t("p",null,"$"+d(o.subtotalPrice.toFixed(2)),1)]),e[4]||(e[4]=t("div",{class:"hr"},[t("hr")],-1)),t("div",Pt,[e[1]||(e[1]=t("p",null,"Shipping:",-1)),t("p",null,"$"+d(o.shippingPrice.toFixed(2)),1)]),e[5]||(e[5]=t("div",{class:"hr"},[t("hr")],-1)),t("div",ft,[e[2]||(e[2]=t("p",null,"Discount:",-1)),o.discountPrice>0?(l(),r("p",bt," - $"+d(o.discountPrice.toFixed(2)),1)):(l(),r("p",kt,"$0.00"))]),e[6]||(e[6]=t("div",{class:"hr"},[t("hr")],-1)),t("div",St,[e[3]||(e[3]=t("p",null,"Total:",-1)),t("p",null,"$"+d(o.totalPrice.toFixed(2)),1)])])}const Lt=F(vt,[["render",wt],["__scopeId","data-v-f05671d4"]]),Nt=z("locationStore",{state:()=>({locations:JSON.parse(localStorage.getItem("locations"))||[],selectedLocation:null}),actions:{addLocation(a){this.locations.push(a),this.saveToLocalStorage()},setSelectedLocation(a){this.selectedLocation=a},saveToLocalStorage(){localStorage.setItem("locations",JSON.stringify(this.locations))}}}),xt={name:"Location_Component",components:{Button_Component:O},emits:["update:location"],setup(a,{emit:e}){const s=Nt(),o=y(!1),c=y({fullName:"",streetAddress:"",apartment:"",city:"",phoneNumber:""}),u=x(()=>s.locations);return{showDropdown:o,newLocation:c,locations:u,toggleDropdown:()=>{o.value=!o.value},addLocation:()=>{const{fullName:v,streetAddress:P,apartment:f,city:b,phoneNumber:N}=c.value;if(!v||!P||!b||!N){alert("Please fill in all required fields.");return}s.addLocation({fullName:v,streetAddress:P,apartment:f||"",city:b,phoneNumber:N,selected:!1}),c.value={fullName:"",streetAddress:"",apartment:"",city:"",phoneNumber:""},o.value=!1},formatAddress:v=>{const{streetAddress:P,apartment:f,city:b}=v;return`${P}${f?`, ${f}`:""}, ${b}`},selectLocation:v=>{u.value.forEach((f,b)=>{f.selected=b===v});const P=u.value[v];s.selectedLocation=P,e("update:location",P)}}}},Mt={key:0,class:"material-icons"},Ft={class:"dropdown"},Dt={class:"inputName"},At={class:"inputAddress"},It={class:"inputFloor"},Vt={class:"inputCity"},Ot={class:"inputNumberPhone"},qt={class:"buttonAdd"},Bt=["onClick"],$t={class:"show"},Tt={class:"material-icons"};function Ut(a,e,s,o,c,u){const m=_("Button_Component");return l(),r("div",{class:D(["location",{expanded:o.showDropdown}])},[e[13]||(e[13]=t("div",{class:"title"},[t("p",null,"Location for shipping")],-1)),e[14]||(e[14]=t("hr",null,null,-1)),t("div",{class:"add",onClick:e[0]||(e[0]=(...n)=>o.toggleDropdown&&o.toggleDropdown(...n))},[o.showDropdown?M("",!0):(l(),r("span",Mt," add ")),o.showDropdown?(l(),r("span",{key:1,class:D(["material-icons",{rotated:o.showDropdown}])}," keyboard_arrow_down ",2)):M("",!0),e[6]||(e[6]=t("p",null,"Add new locations",-1))]),C(Q,{name:"dropdown"},{default:E(()=>[w(t("div",Ft,[t("div",Dt,[e[7]||(e[7]=t("p",null,"Full Name",-1)),w(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=n=>o.newLocation.fullName=n)},null,512),[[L,o.newLocation.fullName]])]),t("div",At,[e[8]||(e[8]=t("p",null,"Street Address",-1)),w(t("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=n=>o.newLocation.streetAddress=n)},null,512),[[L,o.newLocation.streetAddress]])]),t("div",It,[e[9]||(e[9]=t("p",null,"Apartment, floor, etc. (optional)",-1)),w(t("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=n=>o.newLocation.apartment=n)},null,512),[[L,o.newLocation.apartment]])]),t("div",Vt,[e[10]||(e[10]=t("p",null,"Town/City",-1)),w(t("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=n=>o.newLocation.city=n)},null,512),[[L,o.newLocation.city]])]),t("div",Ot,[e[11]||(e[11]=t("p",null,"Phone Number",-1)),w(t("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=n=>o.newLocation.phoneNumber=n)},null,512),[[L,o.newLocation.phoneNumber]])]),t("div",qt,[C(m,{"name-button":"Add","color-button":"#FFFFFF","background-color-button":"#564949","height-button":"40px","width-button":"115px",onClick:o.addLocation},null,8,["onClick"])])],512),[[R,o.showDropdown]])]),_:1}),(l(!0),r(I,null,V(o.locations,(n,p)=>(l(),r("div",{class:D(["showLocation",{selected:n.selected}]),key:p,onClick:g=>o.selectLocation(p)},[t("div",$t,[e[12]||(e[12]=t("span",{class:"material-icons"},"home",-1)),t("p",null,d(o.formatAddress(n)),1)]),t("span",Tt,d(n.selected?"check_circle":"radio_button_unchecked"),1)],10,Bt))),128))],2)}const zt=F(xt,[["render",Ut],["__scopeId","data-v-59681128"]]),$="/assets/card-Ca2jl0RY.png",T="/assets/visa-afyQHn1c.png",Et=z("paymentStore",{state:()=>({payments:JSON.parse(localStorage.getItem("payments"))||[],selectedPayment:null}),actions:{addPayment(a){this.payments.push(a),this.saveToLocalStorage()},setSelectedPayment(a){this.selectedPayment=a},saveToLocalStorage(){localStorage.setItem("payments",JSON.stringify(this.payments))}}}),jt={name:"Payment_Component",components:{Button_Component:O},props:{paymentMethod:String},setup(a,{emit:e}){const s=Et(),o=y([{name:"Visa",icon:T},{name:"MasterCard",icon:$},{name:"ABA",icon:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSUIHKcKRFtUDWjJ2A0SHGyDvzcXhkCfy7m9WfpiUn23JRSGccFqF_0g9G7qS7_3ePLerM&usqp=CAU"},{name:"ACLEDA",icon:"https://ibccambodia.com/wp-content/uploads/2021/02/ACLEDA-Logo-Existing-New-one-07-2-e1613988422171.png"}]),c=y(null),u={ABA:"https://i.ibb.co/t3fpgxv/photo-2024-12-01-18-21-24.jpg",ACLEDA:"https://i.ibb.co/tKnK4T8/photo-2024-12-01-18-21-18.jpg"},m=i=>u[i]||"https://via.placeholder.com/150x150",n=y({name:"",cardNumber:"",expiry:"",cvv:""}),p=x(()=>s.payments),g=y(null);return{paymentMethods:o,selectedPaymentMethod:c,getQrCode:m,cardDetails:n,savedCards:p,selectedCard:g,togglePaymentMethod:i=>{c.value===i.name?c.value=null:c.value=i.name,e("update:paymentMethod",c.value)},toggleSavedCard:i=>{g.value===i?(g.value=null,s.selectedPayment=null):(g.value=i,s.selectedPayment=i,c.value=i.type),e("update:paymentMethod",c.value)},getCardIcon:i=>i==="Visa"?T:i==="MasterCard"?$:null,addCard:()=>{const{name:i,cardNumber:k,expiry:h,cvv:A}=n.value;if(!i||!k||!h||!A){alert("Please fill in all the card details.");return}const S={type:c.value,name:i,cardNumber:k,expiry:h,cvv:A};s.addPayment(S),alert(`Card for ${i} added successfully!`),n.value={name:"",cardNumber:"",expiry:"",cvv:""},c.value=null},maskCardNumber:i=>i.replace(/\d(?=\d{4})/g,"*")}}},Ht={class:"location"},Jt={class:"method"},Qt=["onClick"],Rt=["src","alt"],Yt={class:"details"},Gt={key:0,class:"card-details"},Kt={class:"titleCard"},Xt={class:"inputName"},Wt={class:"inputCardNumber"},Zt={class:"inputExpired"},te={class:"inputCVV"},ee={class:"buttonAdd"},oe={key:1,class:"qr-code"},ne=["src"],se={class:"showCard"},ae=["onClick"],ce={class:"detailCard"},le=["src"],re={class:"material-icons"};function ie(a,e,s,o,c,u){const m=_("Button_Component");return l(),r("div",Ht,[e[10]||(e[10]=t("div",{class:"title"},[t("p",null,"Select Payment Method")],-1)),e[11]||(e[11]=t("hr",null,null,-1)),t("div",Jt,[(l(!0),r(I,null,V(o.paymentMethods,(n,p)=>(l(),r("div",{class:D(["payment-option",{selected:o.selectedPaymentMethod===n.name}]),key:p,onClick:g=>o.togglePaymentMethod(n)},[t("img",{src:n.icon,alt:n.name},null,8,Rt),t("p",null,d(n.name),1)],10,Qt))),128))]),t("div",Yt,[(o.selectedPaymentMethod==="Visa"||o.selectedPaymentMethod==="MasterCard")&&!o.selectedCard?(l(),r("div",Gt,[t("div",Kt,[t("p",null,[e[4]||(e[4]=Y(" Add a New Card for ")),t("span",null,d(o.selectedPaymentMethod),1)])]),t("div",Xt,[e[5]||(e[5]=t("p",null,"Name on Card",-1)),w(t("input",{type:"text",placeholder:"Enter name","onUpdate:modelValue":e[0]||(e[0]=n=>o.cardDetails.name=n)},null,512),[[L,o.cardDetails.name]])]),t("div",Wt,[e[6]||(e[6]=t("p",null,"Card Number",-1)),w(t("input",{type:"text",placeholder:"Enter card number","onUpdate:modelValue":e[1]||(e[1]=n=>o.cardDetails.cardNumber=n)},null,512),[[L,o.cardDetails.cardNumber]])]),t("div",Zt,[e[7]||(e[7]=t("p",null,"Expiry Date",-1)),w(t("input",{type:"text",placeholder:"MM/YY","onUpdate:modelValue":e[2]||(e[2]=n=>o.cardDetails.expiry=n)},null,512),[[L,o.cardDetails.expiry]])]),t("div",te,[e[8]||(e[8]=t("p",null,"CVV",-1)),w(t("input",{type:"text",placeholder:"CVV","onUpdate:modelValue":e[3]||(e[3]=n=>o.cardDetails.cvv=n)},null,512),[[L,o.cardDetails.cvv]])]),t("div",ee,[C(m,{"name-button":"Add Card","color-button":"#FFFFFF","background-color-button":"#564949","height-button":"40px","width-button":"115px",onClick:o.addCard},null,8,["onClick"])])])):M("",!0),o.selectedPaymentMethod==="ABA"||o.selectedPaymentMethod==="ACLEDA"?(l(),r("div",oe,[t("p",null," Scan the QR Code below to proceed with payment "+d(o.selectedPaymentMethod)+": ",1),t("img",{src:o.getQrCode(o.selectedPaymentMethod),alt:"QR Code"},null,8,ne)])):M("",!0)]),t("div",se,[e[9]||(e[9]=t("p",null,"Your Cards",-1)),(l(!0),r(I,null,V(o.savedCards,(n,p)=>(l(),r("div",{key:p,class:D(["saved-card",{selected:o.selectedCard===n}]),onClick:g=>o.toggleSavedCard(n)},[t("div",ce,[t("img",{src:o.getCardIcon(n.type),alt:"Card Icon",class:"card-icon"},null,8,le),t("p",null,"Card Number: "+d(o.maskCardNumber(n.cardNumber)),1)]),t("span",re,d(o.selectedCard===n?"check_circle":"radio_button_unchecked"),1)],10,ae))),128))])])}const de=F(jt,[["render",ie],["__scopeId","data-v-df3eab1f"]]),ue={name:"PaymentSuccess_Component",components:{Button_Component:O},props:{totalPrice:{type:[String,Number],required:!0},paymentMethod:{type:String,required:!0},transactionId:{type:String,required:!0},transactionDate:{type:String,required:!0}},methods:{goToOrderHistory(){this.$router.push("/order")}}},me={class:"paymentAlert"},pe={class:"info"},_e={class:"totalPrice"},ye={class:"paymentMethod"},ve={class:"transactionId"},he={class:"transactionDate"},Ce={class:"btn"},ge={class:"history"};function Pe(a,e,s,o,c,u){const m=_("Button_Component"),n=_("router-link");return l(),r("div",me,[e[0]||(e[0]=G('<div class="success-animation" data-v-68424c60><svg class="checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52" data-v-68424c60><circle class="checkmark__circle" cx="26" cy="26" r="25" fill="none" data-v-68424c60></circle><path class="checkmark__check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8" data-v-68424c60></path></svg></div><p class="success-message" data-v-68424c60>Payment successful!</p><div class="thank" data-v-68424c60> Thank you for your payment. Your order has been processed successfully. </div>',3)),t("div",pe,[t("p",_e,"Amount: $"+d(s.totalPrice.toFixed(2)),1),t("p",ye,"Payment Method: "+d(s.paymentMethod),1),t("p",ve,"Transaction ID: "+d(s.transactionId),1),t("p",he,"Transaction Date: "+d(s.transactionDate),1)]),t("div",Ce,[C(n,{to:"/order"},{default:E(()=>[t("div",ge,[C(m,{"name-button":"View Order History","width-button":"200px","height-button":"50px","background-color-button":"#564949","color-button":"#FFFFFF"})])]),_:1})])])}const fe=F(ue,[["render",Pe],["__scopeId","data-v-68424c60"]]),be={name:"CheckOutView",components:{Navbar_Component:X,Breadcrumb_Component:H,Location_Component:zt,PaymentMethod_Component:de,Footer_Component:W,Button_Component:O,LoadingView:tt,PaymentSuccess_Component:fe,ConfirmSum_Component:Lt,CheckOutItem_Component:yt},setup(){const a=j(),e=B(),s=Z(),o=y(!0),c=y(!1),u=y(null),m=y(null),n=y("TXN123456789"),p=y(new Date().toLocaleString()),g=x(()=>a.getSubtotal),v=y(parseFloat(localStorage.getItem("discountPrice"))||0),P=.25,f=x(()=>g.value+P-v.value);U(v,h=>{h<=0&&localStorage.setItem("discountPrice","0")}),K(()=>{setTimeout(()=>{o.value=!1},1e3)});const b=h=>{console.log("Selected Location:",h),m.value=h},N=h=>{console.log("Selected Payment Method:",h),u.value=h},i=()=>{localStorage.setItem("discountPrice","0")};return{isLoading:o,isPaymentSuccess:c,selectedPaymentMethod:u,transactionId:n,transactionDate:p,updateLocation:b,updatePaymentMethod:N,handlePayNow:()=>{if(!u.value){alert("Please select a payment method.");return}if(!m.value){alert("Please select a shipping location.");return}const h=Array.isArray(e.checkOut)?e.checkOut:Object.values(e.checkOut);console.log("CheckOut Items: ",h),c.value=!0,i(),n.value=`TXN${Math.floor(Math.random()*1e9)}`;const A={id:n.value,date:p.value,items:h.map(S=>({id:S.id,name:S.name,image:S.image||"default-image-url.jpg",quantity:S.quantity,price:S.price,discount:S.discount,finalPrice:S.finalPrice,color:S.color,size:S.size})),totalPrice:f.value,paymentMethod:u.value,shippingLocation:m.value};s.addOrderFromCheckout(A),setTimeout(()=>{a.clearCart()},1e4),setTimeout(()=>{c.value=!1},5e3)},totalPrice:f,selectedLocation:m}},computed:{checkOutItems(){return B().checkOut.map(e=>{const s=parseFloat(e.discount.replace("%",""))||0,o=e.price*s/100,c=e.price-o;return{...e,discountPrice:o,finalPrice:c}})},shippingPrice(){return .25},subtotalPrice(){return this.checkOutItems.reduce((a,e)=>a+e.finalPrice*e.quantity,0)},totalDiscountPrice(){return this.checkOutItems.reduce((a,e)=>a+e.discountPrice*e.quantity,0)}}},ke={class:"checkoutScreen"},Se={key:0,class:"load"},we={key:1},Le={class:"container"},Ne={class:"left"},xe={class:"right"},Me={class:"payNow"},Fe={key:2,class:"showSuccess"};function De(a,e,s,o,c,u){const m=_("Navbar_Component"),n=_("LoadingView"),p=_("Breadcrumb_Component"),g=_("Location_Component"),v=_("PaymentMethod_Component"),P=_("CheckOutItem_Component"),f=_("ConfirmSum_Component"),b=_("Button_Component"),N=_("Footer_Component"),i=_("PaymentSuccess_Component");return l(),r("div",ke,[C(m),o.isLoading?(l(),r("div",Se,[C(n)])):(l(),r("div",we,[C(p),e[0]||(e[0]=t("div",{class:"title"},[t("h1",{style:{"font-family":"Saira, sans-serif"}},"Check Out")],-1)),t("div",Le,[t("div",Ne,[C(g,{"onUpdate:location":o.updateLocation},null,8,["onUpdate:location"]),C(v,{style:{"margin-top":"5%"},"onUpdate:paymentMethod":o.updatePaymentMethod},null,8,["onUpdate:paymentMethod"])]),t("div",xe,[(l(!0),r(I,null,V(u.checkOutItems,k=>(l(),q(P,{style:{"margin-bottom":"3%"},key:k.id,id:k.id,imageProduct:k.image,nameProduct:k.name,sizeProduct:k.size,priceProduct:k.price,quantity:k.quantity},null,8,["id","imageProduct","nameProduct","sizeProduct","priceProduct","quantity"]))),128)),C(f)])]),t("div",Me,[C(b,{"name-button":"Pay Now","color-button":"#FFFFFF","background-color-button":"#958383","height-button":"50px","width-button":"200px",onClick:o.handlePayNow},null,8,["onClick"])]),C(N,{style:{"margin-top":"5%"}})])),o.isPaymentSuccess?(l(),r("div",Fe,[(l(),q(i,{key:o.isPaymentSuccess,totalPrice:o.totalPrice,paymentMethod:o.selectedPaymentMethod,transactionId:o.transactionId,transactionDate:o.transactionDate,location:o.selectedLocation},null,8,["totalPrice","paymentMethod","transactionId","transactionDate","location"]))])):M("",!0)])}const ze=F(be,[["render",De],["__scopeId","data-v-a1a8f06d"]]);export{ze as default};
